## skipList

### 介绍

redis的跳跃表由两部分组成：zskiplist和zskiplistNode

#### zskiplist

header：指向跳跃表的表头节点

tail：指向跳跃表的表尾节点

level：记录目前跳跃表内，层数最大的节点的层数（表头节点的层数不算在内）

length：记录目前跳跃表的长度即跳跃表包含的节点数（表头节点不计算在内）

##### 指针作用

header和tail指针分别指向跳跃表的表头节点和表尾节点，通过这两个指针，程序定位表头节点和表尾节点的复杂度为O(1)。

通过使用length属性来记录节点的数量，程序可以在O(1)的时间复杂度内计算出跳跃表的长度。

#### zskiplistNode

层：节点中用L1、L2等字样标记节点的各个层，每个层都有两个属性：前进指针和跨度。前进指针用于访问表尾方向的其他节点，跨度记录了前进指针所指向节点和当前节点之间的距离。跨度可用来计算排位（rank）：在查找某个节点的过程中，将沿途访问过的所有层的跨度累计起来，得到的结果就是目标节点在跳跃表中的排位。

后退指针：节点中用BW字样标记节点的后退指针，指向当前节点的前一个节点。后退指针在程序从表尾向表头遍历时使用。

分值：各个节点的1.0、2.0、3.0代表每个元素的分值。在跳跃表中，各个节点按各自所保存的分值从小到大排列。

成员对象：各个节点的o1、o2、o3代表节点保存的成员对象。



![1627890773878](E:\GithubNote\数据库\images/1627890773878.png)

#### 举例

查找分值为2.0，成员为o2的节点过程如上图中虚线所示

